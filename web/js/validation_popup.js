;var xhr=null,tabRequete=JSON.parse($("#tabloRequete").val()),choixLocalisation=null,$chargementSelection=!0;function selection(e,t,a){attente();setTimeout(function(){ajaxGetChoixLocalisation();var r=document.getElementById("genres").value,l=document.getElementById("modules").value,i;if(choixLocalisation===null){i=document.getElementById("localisations").value}
else{document.getElementById("localisations").value=choixLocalisation;i=choixLocalisation};var f=!1;if(t==="reinitModule"){t="module";l="all";r="all"};if(a==!0){document.getElementById("codeModule").value=""};if(t==="genre"){xhr=getXHR();if(e==="graphique"){callPathAjax(xhr,"ipc_configSelect","genre0",!1)}
else if(e==="listing"){callPathAjax(xhr,"ipc_configSelect","genre1",!1)};xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded");if(i=="every"){i="all"};var s="genres="+encodeURIComponent(r)+"&modules="+encodeURIComponent(l)+"&localisations="+i;xhr.send(s);var n=xhr.responseText,d="ListeSuivante",p=d.length,m=n.indexOf(d),g=n.slice(0,m),h=n.slice(m+p);document.getElementById("modules").innerHTML=g;var c=!1;for(var u=0;u<l.length;u++){for(var o=0;o<document.getElementById("modules").options.length;o++){if(document.getElementById("modules").options[o].value==l){document.getElementById("modules").options[o].selected=!0;c=!0}}};if(c==!1){t="reinitModule";selection(e,t,a);return};document.getElementById("messages").innerHTML=h;if(h.length!=0){document.getElementById("messages").options[0].selected=!0}};if(t==="module"){xhr=getXHR();if(e==="graphique"){callPathAjax(xhr,"ipc_configSelect","module0",!1)}
else if(e==="listing"){callPathAjax(xhr,"ipc_configSelect","module1",!1)};xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded");if(i==="every"){i="all"};var s="genres="+encodeURIComponent(r)+"&modules="+encodeURIComponent(l)+"&localisations="+i;xhr.send(s);n=xhr.responseText;document.getElementById("messages").innerHTML=n;if(n.length!=0){document.getElementById("messages").value=document.getElementById("messages").options[0].value};if(f==!0){document.getElementById("modules").value=document.getElementById("modules").options[0].value;document.getElementById("genres").value=document.getElementById("genres").options[0].value;window.location.href=window.location.href}};if(e==="graphique"){selectionMessage("ipc_graphiques","graphique")}
else if(e==="listing"){selectionMessage("ipc_listing","listing")};fin_attente();return},300)};function reinitialise_codeMessage(e){selection(e,"genre",!0)};function choixCodeMessage(){var t=document.getElementById("codeModule").value.toUpperCase(),a=t.length;for(var e=0;e<document.getElementById("messages").options.length;e++){if(document.getElementById("messages").options[e].text.substr(0,a)==t){document.getElementById("messages").options[e].selected=!0;return}}};function searchMessage(e){var t=String.fromCharCode(e.which);alert(t)};function resetAjaxForm(e){attente();var t=verifNombreRequetes();if(t!=0){setTimeout(function(){xhr=getXHR();var a="AJAX=ajax&choixSubmit=RAZ";if(e=="graphique"){callPathAjax(xhr,"ipc_accueilGraphique",a,!1)}
else if(e=="listing"){callPathAjax(xhr,"ipc_accueilListing",a,!1)}
else if(e=="etat"){callPathAjax(xhr,"ipc_accueilEtat",a,!1)};xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded");xhr.send(null);var t="<table><thead><tr><th class='localisation'>Localisation</th><th class='code'>Code message</th><th class='designation'>Désignation</th><th class='actions'>Actions</th></tr></thead>";t=t+"<tbody>";t=t+"<tr>";if(e=="graphique"){t=t+"<td colspan='3' class='texte'>"+traduire("label.ajout_courbe")+"</td>"}
else if(e=="listing"){t=t+"<td colspan='3' class='texte'>"+traduire("label.ajout_listing")+"</td>"}
else if(e=="etat"){t=t+"<td colspan='3' class='texte'>Ajouter un compteur</td>"};t=t+"<td class='actions'>";if(e=="graphique"){t=t+"<a class='bouton' href='{{ path('ipc_graphiques') }}' target='_blank' onClick=\"onLightBox('ipc_graphiques','Sélection des requêtes graphique');openLightBox();return false;\">"}
else if(e=="listing"){t=t+"<a class='bouton' href='{{ path('ipc_listing') }}' target='_blank' onClick=\"onLightBox('ipc_listing','Sélection des requêtes de listing');openLightBox();return false;\">"}
else if(e=="etat"){t=t+"<a class='bouton' href='{{ path('ipc_etat') }}' target='_blank' onClick=\"onLightBox('ipc_etat','Sélection des requêtes etat');openLightBox();return false;\">"};t=t+"<div class='bouton ajouter'></div>";t=t+"<div class='boutonname'>"+traduire("bouton.ajouter_requete")+"</div>";t=t+"</a>";t=t+"</td></tr>";t=t+"<input type='hidden' id='nombre_requetes' name='nombre_requetes' value='0'>";t=t+"</tbody></table>";$("div.requetemessage").html(t);fin_attente();return},50)}
else{fin_attente();return}};function deleteAjaxForm(e,t){attente();setTimeout(function(){xhr=getXHR();var l="AJAX=ajax&choixSubmit=suppressionRequete&suppression_requete="+t;if(e=="graphique"){callPathAjax(xhr,"ipc_accueilGraphique",l,!1)}
else if(e=="listing"){callPathAjax(xhr,"ipc_accueilListing",l,!1)}
else if(e=="etat"){callPathAjax(xhr,"ipc_accueilEtat",l,!1)};xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded");xhr.send(null);var i=JSON.parse(xhr.responseText);tabRequete=i;var a="<table><thead>";a=a+"<tr><th class='localisation'>Localisation</th><th class='code'>Code message</th><th class='designation'>Désignation</th><th class='actions'>Actions</th>";a=a+"</tr></thead>";a=a+"<tbody>";var n=0;for(liste in i){a=a+"<tr><td class='localisation'><div class='txtlocalisation'>"+i[liste]["localisation"]+"</div></td>";if(i[liste]["code"]!=null){a=a+"<td class='code'>"+i[liste]["code"]+"</td>"}
else{a=a+"<td class='code'>&nbsp;</td>"};a=a+"<td class='designation'>"+i[liste]["message"]+"</td>";a=a+"<td class='actions'>";if(e=="graphique"){a=a+"<a class='bouton' href='{{ path('ipc_graphiques') }}' target='_blank' name='modRequete_"+i[liste]["numrequete"]+"' onClick=\"declanchementUpdateAjaxForm(1,'ipc_graphiques','graphique',this.name,"+n+",'modificationRequete');return false;\" ><div class='bouton editer'></div><div class='boutonname'>"+traduire("bouton.editer_requete")+"</div></a>"}
else if(e=="listing"){a=a+"<a class='bouton' href='{{ path('ipc_listing') }}' target='_blank' name='modRequete_"+i[liste]["numrequete"]+"' onClick=\"declanchementUpdateAjaxForm(1,'ipc_listing','listing',this.name,"+n+",'modificationRequete');return false;\" ><div class='bouton editer'></div><div class='boutonname'>"+traduire("bouton.editer_requete")+"</div></a>"}
else if(e=="etat"){a=a+"<a class='bouton' href='{{ path('ipc_etat') }}' target='_blank' name='modRequete_"+i[liste]["numrequete"]+"' onClick=\"declanchementUpdateAjaxForm(1,'ipc_etat','etat',this.name,"+n+",'modificationRequete');return false;\" ><div class='bouton editer'></div><div class='boutonname'>"+traduire("bouton.editer_requete")+"</div></a>"};a=a+"<a class='bouton' href='#' target='_blank' name='suppRequete_"+i[liste]["numrequete"]+"' onClick=\"declanchementDeleteAjaxForm(1,'"+e+"',this.name,'suppressionRequete');return false;\"><div class='bouton supprimer'></div><div class='boutonname'>"+traduire("bouton.supprimer_requete")+"</div></a></td>";a=a+"</tr>";n++};a=a+"<tr>";if(e=="graphique"){a=a+"<td colspan='3' class='texte'>"+traduire("label.ajout_courbe")+"</td>"}
else if(e=="listing"){a=a+"<td colspan='3' class='texte'>"+traduire("label.ajout_listing")+"</td>"}
else if(e=="etat"){a=a+"<td colspan='3' class='texte'>Ajouter un compteur</td>"};a=a+"<td class='actions'>";if(e=="graphique"){a=a+"<a class='bouton' href='{{ path('ipc_graphiques') }}' target='_blank' onClick=\"onLightBox('ipc_graphiques','Sélection des requêtes graphique');openLightBox();return false;\">"}
else if(e=="listing"){a=a+"<a class='bouton' href='{{ path('ipc_listing') }}' target='_blank' onClick=\"onLightBox('ipc_listing','Sélection des requêtes de listing');openLightBox();return false;\">"}
else if(e=="etat"){a=a+"<a class='bouton' href='{{ path('ipc_etat') }}' target='_blank' onClick=\"onLightBox('ipc_etat','Sélection des requêtes etat');openLightBox();return false;\">"};a=a+"<div class='bouton ajouter'></div>";a=a+"<div class='boutonname'>"+traduire("bouton.ajouter_requete")+"</div>";a=a+"</a></td>";a=a+"</tr>";a=a+"<input type='hidden' id='nombre_requetes' name='nombre_requetes' value='"+i.length+"'>";a=a+"</tbody></table>";$("div.requetemessage").html(a);fin_attente();return},50)};function sendAjaxForm(e){attente();setTimeout(function(){var p=document.getElementById("localisations").value;if(p==""){fin_attente();return};var g=document.getElementById("genres").value,f=document.getElementById("modules").value,d=document.getElementById("messages").value,m=$("input[type='radio'][name='codeVal1']").filter(":checked").val(),h=$("input[type='radio'][name='codeVal2']").filter(":checked").val(),n=null,o=null,i=null,l=null,v=document.getElementById("modificationRequete").value,x=document.getElementById("choixSubmit_add").value,y=$("input[type='radio'][name='suppression_requete']").filter(":checked").val(),b="ajax";switch(m){case undefined:break;case"Inf":var n=parseInt(document.getElementById("codeVal1Min").value);break;case"Sup":var n=parseInt(document.getElementById("codeVal1Max").value);break;case"Int":var n=parseInt(document.getElementById("codeVal1IntMin").value);var o=parseInt(document.getElementById("codeVal1IntMax").value);break};switch(h){case undefined:break;case"Inf":var i=parseInt(document.getElementById("codeVal2Min").value);break;case"Sup":var i=parseInt(document.getElementById("codeVal2Max").value);break;case"Int":var i=parseInt(document.getElementById("codeVal2IntMin").value);var l=parseInt(document.getElementById("codeVal2IntMax").value);break};var r=!0,u="";if(o!=null){if(o<n){u="Erreur : valeur1 max < valeur1 min ("+o+" < "+n+")";r=!1}};if(l!=null){if(l<i){u="Erreur : valeur2 max < valeur2 min ("+l+" < "+i+")";r=!1}};if(d==""){u="Erreur : Aucun message sélectionné";r=!1};if(r==!1){$("#messageboxInfos").text(u);$("#messagebox").removeClass("cacher");fin_attente();return};xhr=getXHR();var c="AJAX="+b+"&choixSubmit="+x+"&listeLocalisations="+p+"&listeGenres="+g+"&listeModules="+f+"&listeIdModules="+d+"&codeVal1="+m+"&codeVal2="+h+"&codeVal1Min="+n+"&codeVal1Max="+o+"&codeVal2Min="+i+"&codeVal2Max="+l+"&modificationRequete="+v;if(e==="graphique"){callPathAjax(xhr,"ipc_accueilGraphique",c,!1)}
else if(e==="listing"){callPathAjax(xhr,"ipc_accueilListing",c,!1)}
else if(e==="etat"){callPathAjax(xhr,"ipc_accueilEtat",c,!1)};xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded");xhr.send(null);try{var a=JSON.parse(xhr.responseText)}catch(q){alert("error : "+q);alert(xhr.responseText);window.location.href=window.location.href;return};tabRequete=a;var t="<table><thead><tr><th class='localisation'>"+traduire("label.localisation")+"</th><th class='code'>"+traduire("label.code_message")+"</th><th class='designation'>"+traduire("label.designation")+"</th><th class='actions'>"+traduire("label.action")+"</th></tr></thead>";t=t+"<tbody>";var s=0;for(liste in a){t=t+"<tr><td class='localisation'><div class='txtlocalisation'>"+a[liste]["localisation"]+"</div></td>";if(a[liste]["code"]!=null){t=t+"<td class='code'>"+a[liste]["code"]+"</td>"}
else{t=t+"<td class='code'>&nbsp;</td>"};t=t+"<td class='designation'>"+a[liste]["message"]+"</td>";t=t+"<td class='actions'>";if(e==="graphique"){t=t+"<a class='bouton' href='{{ path('ipc_graphiques') }}' target='_blank' name='modRequete_"+a[liste]["numrequete"]+"' onClick=\"declanchementUpdateAjaxForm(1,'ipc_graphiques','graphique',this.name,"+s+",'modificationRequete');return false;\" ><div class='bouton editer'></div><div class='boutonname'>"+traduire("bouton.editer_requete")+"</div></a>"}
else if(e==="listing"){t=t+"<a class='bouton' href='{{ path('ipc_listing') }}' target='_blank' name='modRequete_"+a[liste]["numrequete"]+"' onClick=\"declanchementUpdateAjaxForm(1,'ipc_listing','listing',this.name,"+s+",'modificationRequete');return false;\" ><div class='bouton editer'></div><div class='boutonname'>"+traduire("bouton.editer_requete")+"</div></a>"}
else if(e==="etat"){t=t+"<a class='bouton' href='{{ path('ipc_etat') }}' target='_blank' name='modRequete_"+a[liste]["numrequete"]+"' onClick=\"declanchementUpdateAjaxForm(1,'ipc_etat','etat',this.name,"+s+",'modificationRequete');return false;\" ><div class='bouton editer'></div><div class='boutonname'>"+traduire("bouton.editer_requete")+"</div></a>"};t=t+"<a class='bouton' href='#' target='_blank' name='suppRequete_"+a[liste]["numrequete"]+"' onClick=\"declanchementDeleteAjaxForm(1,'"+e+"',this.name,'suppressionRequete');return false;\" ><div class='bouton supprimer'></div><div class='boutonname'>"+traduire("bouton.supprimer_requete")+"</div></a></td>";t=t+"</tr>";s+=1};t=t+"<tr>";if(e==="graphique"){t=t+"<td colspan='3' class='texte'>"+traduire("label.ajout_courbe")+"</td>"}
else if(e==="listing"){t=t+"<td colspan='3' class='texte'>"+traduire("label.ajout_listing")+"</td>"}
else if(e==="etat"){t=t+"<td colspan='3' class='texte'>Ajouter un compteur</td>"};t=t+"<td class='actions'><a class='bouton' href='#' target='_blank' onClick='ouverturePopup(\""+e+"\");return false;'>";t=t+"<div class='bouton ajouter'></div>";t=t+"<div class='boutonname'>"+traduire("bouton.ajouter_requete")+"</div></a></td>";t=t+"</tr>";t=t+"<input type='hidden' id='nombre_requetes' name='nombre_requetes' value='"+a.length+"'>";t=t+"</tbody></table>";$("div.requetemessage").html(t);fin_attente();return},50)};function razUpdate(){document.getElementById("modificationRequete").value="";razCodeModule()};function razCodeModule(){document.getElementById("codeModule").value=""};function ajaxSetChoixLocalisation(){var e=document.getElementById("localisations").value,t=$("#localisations").attr("data-url");$.ajax({type:"get",async:!1,timeout:5000,url:t,data:"localisation="+e})};function ajaxGetChoixLocalisation(){var e=$("#localisations").attr("data-url");$.ajax({type:"get",url:e,data:"localisation=get",async:!1,timeout:5000,success:function(e,t,a){choixLocalisation=e},error:function(e,t,a){choixLocalisation=null}})};